<app-auth-header></app-auth-header>

<div
  class="auth-wrapper min-vh-100 d-flex flex-column flex-md-row"
  [dir]="langService.isAr() ? 'rtl' : 'ltr'"
>
  <!-- Marketing Section -->
  <div
    class="marketing-section d-flex align-items-center justify-content-center p-4 p-md-5 col-md-7"
  >
    <div class="marketing-content animate-fade-in">
      <h1 class="display-4 fw-bold text-white mb-4 marketing-title">
        {{ getMarketingContent().hero }}
      </h1>
      <p class="fs-5 text-light-blue mb-5 opacity-75">
        {{ getMarketingContent().subHero }}
      </p>

      <div class="benefits-grid row g-4 mb-5">
        <div class="col-sm-6" *ngFor="let benefit of getMarketingContent().benefits">
          <div class="benefit-card p-3 rounded-4 glass-card h-100 border-0 shadow-sm">
            <div class="icon-box mb-3">
              <i [class]="benefit.icon + ' text-info fs-3'"></i>
            </div>
            <h5 class="fw-bold text-white mb-2">{{ benefit.title }}</h5>
            <p class="text-white-50 small mb-0">{{ benefit.desc }}</p>
          </div>
        </div>
      </div>

      <div class="why-different glass-card p-4 rounded-4 border-0 mb-4 animate-slide-up">
        <h6 class="text-info fw-bold mb-2">{{ getMarketingContent().whyDifferent.title }}</h6>
        <p class="text-white small mb-0">{{ getMarketingContent().whyDifferent.desc }}</p>
      </div>

      <div class="cta-banner mt-auto pt-4 border-top border-white-10">
        <p class="text-info fw-bold mb-0 italic">{{ getMarketingContent().cta }}</p>
      </div>
    </div>
  </div>

  <!-- Form Section -->
  <div class="form-section d-flex align-items-center justify-content-center p-4 col-md-5">
    <div
      class="form-card p-4 p-md-5 glass-card rounded-5 border-0 shadow-lg w-100 max-w-450 animate-fade-in-right"
    >
      <div class="text-center mb-5">
        <div class="logo-orb mb-4 mx-auto">
          <i class="bi bi-person-lock fs-1 text-info"></i>
        </div>
        <h2 class="fw-bold text-white mb-2">{{ getContent().title }}</h2>
        <p class="text-white-50 small">{{ getContent().subtitle }}</p>
      </div>

      <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
        <div class="mb-4">
          <label class="form-label text-white-50 ps-1 small">{{ getContent().emailLabel }}</label>
          <div class="input-group dark-input-group">
            <span
              class="input-group-text bg-transparent border-0 d-flex align-items-center justify-content-center icon-container"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-info opacity-75"
              >
                <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
              </svg>
            </span>
            <input
              type="email"
              class="form-control bg-transparent border-0 text-white py-3 ps-2"
              name="email"
              [(ngModel)]="model.email"
              required
              #email="ngModel"
              [placeholder]="getContent().emailLabel"
            />
          </div>
        </div>

        <div class="mb-5">
          <label class="form-label text-white-50 ps-1 small">{{
            getContent().passwordLabel
          }}</label>
          <div class="input-group dark-input-group">
            <span
              class="input-group-text bg-transparent border-0 d-flex align-items-center justify-content-center icon-container"
              style="width: 50px"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-info opacity-75"
              >
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
            </span>
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control bg-transparent border-0 text-white py-3 ps-2"
              name="password"
              [(ngModel)]="model.password"
              required
              #password="ngModel"
              [placeholder]="getContent().passwordLabel"
            />
            <button
              type="button"
              class="btn border-0 text-info opacity-75 shadow-none bg-transparent d-flex align-items-center justify-content-center pe-3 ms-n5"
              (click)="togglePasswordVisibility()"
              tabindex="-1"
            >
              <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
            </button>
          </div>
        </div>

        <div *ngIf="errorMessage" class="alert alert-danger-glass slide-in mb-4">
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
          {{ errorMessage }}
        </div>

        <button
          type="submit"
          class="btn btn-info-felosy w-100 py-3 fw-bold rounded-pill shadow-lg ripple mb-4"
          [disabled]="!loginForm.valid || loading"
        >
          <span *ngIf="!loading">{{ getContent().submitBtn }}</span>
          <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
        </button>

        <div class="text-center">
          <span class="text-white-50">{{ getContent().noAccount }}</span>
          <a routerLink="/register" class="ms-2 text-info text-decoration-none fw-bold hover-glow">
            {{ getContent().registerLink }}
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
