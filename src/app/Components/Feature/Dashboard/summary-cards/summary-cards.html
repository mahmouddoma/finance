<div class="row g-2 mb-3">
  @for (card of cards(); track card.title; let first = $first) {
    <div class="col-12 col-sm-6 col-xl-3">
      <div
        class="summary-card h-100 p-3 p-md-4 border-0 transition-all card-hover"
        [class.bg-dark-felosy]="card.isDark"
        [class.bg-white]="!card.isDark"
        [class.text-white]="card.isDark"
        [class.shadow-soft]="!card.isDark"
      >
        <div class="d-flex justify-content-between align-items-start mb-4">
          <div class="card-info">
            <span class="fs-xs fw-bold text-uppercase opacity-75 d-block mb-1">
              {{ card.title }}
            </span>

            <div class="amount-container d-flex align-items-baseline gap-1">
              <h2 class="fw-extrabold m-0 amount-text">{{ card.amountValue }}</h2>
              <span class="fs-xs opacity-75 currency-text">{{ card.currency }}</span>
            </div>
          </div>

          <div
            class="icon-wrapper p-3 rounded-4 shadow-sm"
            [class.bg-white-10]="card.isDark"
            [ngClass]="
              !card.isDark && card.color ? ['bg-soft-' + card.color, 'text-' + card.color] : null
            "
          >
            <i class="bi fs-4" [ngClass]="card.icon"></i>
          </div>
        </div>

        <div class="card-footer-info d-flex align-items-center justify-content-between gap-2 w-100">
          <div
            class="trend-badge d-flex align-items-center gap-1"
            [class.positive]="card.isPositive"
          >
            <span class="fs-xs fw-bold opacity-75">{{ card.note }}</span>
          </div>

          @if (card.id === 'net-wealth') {
            <button
              class="btn btn-sm btn-icon btn-light-soft rounded-circle shadow-sm position-relative z-2"
              style="width: 32px; height: 32px"
              (click)="card.action && card.action()"
              [title]="langService.isAr() ? 'تحويل' : 'Transfer'"
            >
              <i class="bi bi-arrow-left-right fs-xs"></i>
            </button>
          }
        </div>

        <i class="bi watermark opacity-03" [ngClass]="card.icon"></i>
      </div>
    </div>
  }
</div>

@if (showTransferDialog()) {
  <app-transfer-net-wealth-dialog
    (close)="showTransferDialog.set(false)"
    (success)="onTransferSuccess()"
  ></app-transfer-net-wealth-dialog>
}
